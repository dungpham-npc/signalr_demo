@page "{id:int}"
@model PhamAnhDungRazorPages.Pages.Account.DeleteModel
@{
    Layout = null;
}

<h3>Are you sure you want to delete this account?</h3>
<form id="deleteForm" class="modal-form">
    <input type="hidden" asp-for="Account.AccountId" />
    @Html.AntiForgeryToken()
    <div class="form-actions">
        <button type="submit" class="btn btn-danger">Delete</button>
        <button type="button" class="btn btn-secondary" onclick="closeModal('deleteModal')">Cancel</button>
    </div>
</form>

<style>
    .modal-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .form-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 1rem;
    }

    .btn-danger {
        background: #dc3545;
        color: white;
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        transition: background 0.3s;
    }

    .btn-danger:hover {
        background: #c82333;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        transition: background 0.3s;
    }

    .btn-secondary:hover {
        background: #5a6268;
    }
</style>

<script>
    $(document).ready(function() {
        $('#deleteForm').submit(function(event) {
            event.preventDefault();
            let accountId = @Model.Account.AccountId;

            $.ajax({
                url: `/Account/Delete/${accountId}?handler=Delete`,
                type: 'POST',
                data: { id: accountId },
                headers: {
                    'RequestVerificationToken': $('input[name="__RequestVerificationToken"]').val()
                },
                success: function(response) {
                    closeModal('deleteModal');
                    location.reload();
                },
                error: function(xhr) {
                    console.error('Error:', xhr.responseText);
                    alert('Failed to delete account');
                }
            });
        });
    });
</script>